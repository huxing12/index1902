<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<script src="tool.js" type="text/javascript" charset="utf-8"></script>
	<body>
		<p>利用ajax与服务器建立连接</p>
		<input type="button" name="btn" id="btn" value="请求数据" />
		<div id="box">
			
		</div>
		
	</body>
	<script type="text/javascript">
		var oBtn = $id('btn');
		var oDiv = $id('box');
		//添加事件；
		oBtn.onclick = function(){
			//1,买手机------创建XMLHttpRequest对象
			//var xhr = new XMLHttpRequest();
			//var xhr = new ActiveXObject('Microsoft.XMLHTTP');
			var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP')
			//2,拨号，与服务器建立连接
			xhr.open('GET','abc.txt',true);
			//第一个参数:请求传递的方式:get post  put;
			//第二个参数：请求URL地址
			//第三个参数：是否异步ture : 异步（默认） false:同步；
			//3.说话----发送请求
			xhr.send();
			//4,听并等待接受---利用事件监听，将请求的数据通过回调函数返回
			//给xhr对象添加一个监听事件 状态改变事件
			xhr.onreadystatechange = function(){
				if(xhr.readyState === 4){
					if(xhr.status === 200){
						oDiv.innerHTML = xhr.responseText;
					}
				}
			}
		}
	</script>
</html>
